on:
  pull_request:
    branches:
      - main
  workflow_dispatch:

jobs:
  sdk-template-unit-tests:
    name: SDK Template
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
        with:
          path: repo
      - name: Run SDK Template Unit Tests
        run: docker run -v "$PWD/repo:/backup-and-restore-sdk-release" --rm -i "$(docker build -q ./repo/.github/actions/sdk-template-unit-tests/)"

  s3-blobstore-unit-tests:
    name: S3 Blobstore
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
        with:
          path: repo
      - name: Run S3 Blobstore Unit Tests
        run: docker run -v "$PWD/repo:/backup-and-restore-sdk-release" --rm -i "$(docker build -q ./repo/.github/actions/s3-blobstore-unit-tests/)"

  azure-blobstore-unit-tests:
    name: Azure Blobstore
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
        with:
          path: repo
      - name: Run Azure Blobstore Unit Tests
        run: docker run -v "$PWD/repo:/backup-and-restore-sdk-release" --rm -i "$(docker build -q ./repo/.github/actions/azure-blobstore-unit-tests/)"

  gcs-blobstore-unit-tests:
    name: GCS Blobstore
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v3
        with:
          path: repo
      - name: Run GCS Blobstore Unit Tests
        run: docker run -v "$PWD/repo:/backup-and-restore-sdk-release" --rm -i "$(docker build -q ./repo/.github/actions/gcs-blobstore-unit-tests/)"
